{"version":3,"file":"blacklight_range_limit.umd.js","sources":["../../../javascript/blacklight_range_limit/range_limit_shared.js","../../../javascript/blacklight_range_limit/range_limit_distro_facets.js","../../../javascript/blacklight_range_limit/range_limit_slider.js","../../../javascript/blacklight_range_limit/index.js"],"sourcesContent":["/**\n * BlacklightRangeLimit module setup.\n */\n'use strict';\n\nconst BlacklightRangeLimit = {}\n\nBlacklightRangeLimit.display_ratio = 1/(1.618 * 2); // half a golden rectangle, why not\n/* A custom event \"plotDrawn.blacklight.rangeLimit\" will be sent when flot plot\n    is (re-)drawn on screen possibly with a new size. target of event will be the DOM element\n    containing the plot.  Used to resize slider to match. */\nBlacklightRangeLimit.redrawnEvent = \"plotDrawn.blacklight.rangeLimit\";\n\n// takes a string and parses into an integer, but throws away commas first, to avoid truncation when there is a comma\n// use in place of javascript's native parseInt\nBlacklightRangeLimit.parseNum = function parseNum(str) {\n  str = String(str).replace(/[^0-9-]/g, '');\n  return parseInt(str, 10);\n};\n\nBlacklightRangeLimit.form_selection = function form_selection(form, min, max) {\n  var begin_val = BlacklightRangeLimit.parseNum($(form).find(\"input.range_begin\").val());\n  if (isNaN(begin_val) || begin_val < min) {\n    begin_val = min;\n  }\n  var end_val = BlacklightRangeLimit.parseNum($(form).find(\"input.range_end\").val());\n  if (isNaN(end_val) || end_val > max) {\n    end_val = max;\n  }\n\n  return BlacklightRangeLimit.normalized_selection(begin_val, end_val);\n}\n\n// Add AJAX fetched range facets if needed, and add a chart to em\nBlacklightRangeLimit.checkForNeededFacetsToFetch = function checkForNeededFacetsToFetch() {\n  $(\".range_limit .profile .distribution a.load_distribution\").each(function() {\n    var container = $(this).parent('div.distribution');\n\n    $(container).load($(this).attr('href'), function(response, status) {\n      if ($(container).hasClass(\"chart_js\") && status == \"success\" ) {\n        BlacklightRangeLimit.turnIntoPlot(container);\n        }\n    });\n  });\n}\n\nBlacklightRangeLimit.function_for_find_segment = function function_for_find_segment(pointer_lookup_arr) {\n  return function(x_coord) {\n    for (var i = pointer_lookup_arr.length-1 ; i >= 0 ; i--) {\n      var hash = pointer_lookup_arr[i];\n      if (x_coord >= hash.from)\n        return hash;\n    }\n    return pointer_lookup_arr[0];\n  };\n}\n\n// Send endpoint to endpoint+0.99999 to have display\n// more closely approximate limiting behavior esp\n// at small resolutions. (Since we search on whole numbers,\n// inclusive, but flot chart is decimal.)\nBlacklightRangeLimit.normalized_selection = function normalized_selection(min, max) {\n  max += 0.99999;\n\n  return {xaxis: { 'from':min, 'to':max}}\n}\n\n// Check if Flot is loaded\nBlacklightRangeLimit.domDependenciesMet = function domDependenciesMet() {\n  return typeof $.plot != \"undefined\"\n}\n\n// Support for Blacklight 7 and 8:\nBlacklightRangeLimit.modalSelector = '#blacklight-modal' // Blacklight.modal?.modalSelector || Blacklight.Modal.modalSelector\n\nBlacklightRangeLimit.modalObserverConfig = {\n  attributes: true,\n}\n\nBlacklightRangeLimit.initSliderModalObserver = function() {\n  // Use a mutation observer to detect when the modal dialog is open\n  const modalObserver = new MutationObserver(function(mutations) {\n    mutations.forEach(function(mutation) {\n      if (mutation.attributeName !== 'open') {return;}\n      if (mutation.target.hasAttribute('open')) {\n        $(BlacklightRangeLimit.modalSelector).find(\".range_limit .profile .range.slider_js\").each(function() {\n          BlacklightRangeLimit.buildSlider(this);\n        });\n      }\n    });\n  });\n  modalObserver.observe($(BlacklightRangeLimit.modalSelector)[0], BlacklightRangeLimit.modalObserverConfig);\n}\n\nBlacklightRangeLimit.initPlotModalObserver = function() {\n  // Use a mutation observer to detect when the modal dialog is open\n  const modalObserver = new MutationObserver(function(mutations) {\n    mutations.forEach(function(mutation) {\n      if (mutation.attributeName !== 'open') {return;}\n      if (mutation.target.hasAttribute('open')) {\n        $(BlacklightRangeLimit.modalSelector).find(\".range_limit .profile .distribution.chart_js ul\").each(function() {\n          BlacklightRangeLimit.turnIntoPlot($(this).parent());\n        });\n\n        // Case when there is no currently selected range\n        BlacklightRangeLimit.checkForNeededFacetsToFetch();\n      }\n    });\n  });\n  modalObserver.observe($(BlacklightRangeLimit.modalSelector)[0], BlacklightRangeLimit.modalObserverConfig);\n}\n\nexport default BlacklightRangeLimit;\n","import BlacklightRangeLimit from 'range_limit_shared'\n\n/**\n * Closure functions in this file are mainly concerned with initializing, resizing, and updating\n * range limit functionality based off of page load, facet opening, page resizing, and otherwise\n * events.\n */\n\nconst RangeLimitDistroFacet = {\n  initialize: function(modalSelector) {\n    // Facets already on the page? Turn em into a chart.\n    $(\".range_limit .profile .distribution.chart_js ul\").each(function() {\n        BlacklightRangeLimit.turnIntoPlot($(this).parent());\n    });\n\n    BlacklightRangeLimit.checkForNeededFacetsToFetch();\n\n    // Listen for twitter bootstrap collapsible open events, to render flot\n    // in previously hidden divs on open, if needed.\n    $(\"body\").on(\"show.bs.collapse\", function(event) {\n      // Was the target a .facet-content including a .chart-js?\n      var container =  $(event.target).filter(\".facet-content\").find(\".chart_js\");\n\n      // only if it doesn't already have a canvas, it isn't already drawn\n      if (container && container.find(\"canvas\").length == 0) {\n        // be willing to wait up to 1100ms for container to\n        // have width -- right away on show.bs is too soon, but\n        // shown.bs is later than we want, we want to start rendering\n        // while animation is still in progress.\n        BlacklightRangeLimit.turnIntoPlot(container, 1100);\n      }\n    });\n\n    // When loaded in a modal\n    $(modalSelector).on('shown.bs.modal', function() {\n      $(this).find(\".range_limit .profile .distribution.chart_js ul\").each(function() {\n        BlacklightRangeLimit.turnIntoPlot($(this).parent());\n      });\n\n      // Case when there is no currently selected range\n      BlacklightRangeLimit.checkForNeededFacetsToFetch();\n    });\n\n    $(\"body\").on(\"shown.bs.collapse\", function(event) {\n      var container =  $(event.target).filter(\".facet-content\").find(\".chart_js\");\n      BlacklightRangeLimit.redrawPlot(container);\n    });\n\n    // debouce borrowed from underscore\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds. If `immediate` is passed, trigger the function on the\n    // leading edge, instead of the trailing.\n    const debounce = function(func, wait, immediate) {\n      var timeout;\n      return function() {\n        var context = this, args = arguments;\n        var later = function() {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n      };\n    };\n\n    $(window).on(\"resize\", debounce(function() {\n      $(\".chart_js\").each(function(i, container) {\n        BlacklightRangeLimit.redrawPlot($(container));\n      });\n    }, 350));\n  }\n}\n\nexport default RangeLimitDistroFacet;","import BlacklightRangeLimit from 'range_limit_shared'\n\nconst RangeLimitSlider = {\n  initialize: function(modalSelector) {\n    $(\".range_limit .profile .range.slider_js\").each(function() {\n      BlacklightRangeLimit.buildSlider(this);\n    });\n\n    // For Blacklight < 8, when loaded in a modal\n    $(modalSelector).on('shown.bs.modal', function() {\n      $(this).find(\".range_limit .profile .range.slider_js\").each(function() {\n        BlacklightRangeLimit.buildSlider(this);\n      });\n    });\n\n    // For Blacklight 8, use a mutation observer to detect when the HTML dialog is open\n    BlacklightRangeLimit.initSliderModalObserver();\n\n    // catch event for redrawing chart, to redraw slider to match width\n    $(\"body\").on(\"plotDrawn.blacklight.rangeLimit\", function(event) {\n      var area       = $(event.target).closest(\".limit_content.range_limit\");\n      var plot       = area.find(\".chart_js\").data(\"plot\");\n      var slider_el  = area.find(\".slider\");\n\n      if (plot && slider_el) {\n        slider_el.width(plot.width());\n        slider_el.css(\"display\", \"block\")\n      }\n    });\n  }\n}\n\n// returns two element array min/max as numbers. If there is a limit applied,\n// it's boundaries are are limits. Otherwise, min/max in current result\n// set as sniffed from HTML. Pass in a DOM element for a div.range\n// Will return NaN as min or max in case of error or other weirdness.\nBlacklightRangeLimit.min_max = function min_max(range_element) {\n  var current_limit =  $(range_element).closest(\".limit_content.range_limit\").find(\".current\")\n  let min, max\n  min = max = BlacklightRangeLimit.parseNum(current_limit.find(\".single\").data('blrlSingle'))\n  if ( isNaN(min)) {\n    min = BlacklightRangeLimit.parseNum(current_limit.find(\".from\").first().data('blrlBegin'));\n    max = BlacklightRangeLimit.parseNum(current_limit.find(\".to\").first().data('blrlEnd'));\n  }\n\n  if (isNaN(min) || isNaN(max)) {\n    //no current limit, take from results min max included in spans\n    min = BlacklightRangeLimit.parseNum($(range_element).find(\".min\").first().text());\n    max = BlacklightRangeLimit.parseNum($(range_element).find(\".max\").first().text());\n  }\n  return [min, max]\n}\n\n\n// Check to see if a value is an Integer\n// see: http://stackoverflow.com/questions/3885817/how-to-check-if-a-number-is-float-or-integer\nBlacklightRangeLimit.isInt = function isInt(n) {\n  return n % 1 === 0;\n}\n\nBlacklightRangeLimit.buildSlider = function buildSlider(thisContext) {\n    var range_element = $(thisContext);\n\n    var boundaries = BlacklightRangeLimit.min_max(thisContext);\n    var min = boundaries[0];\n    var max = boundaries[1];\n\n    if (BlacklightRangeLimit.isInt(min) && BlacklightRangeLimit.isInt(max)) {\n      $(thisContext).contents().wrapAll('<div class=\"sr-only visually-hidden\" />');\n\n      var range_element = $(thisContext);\n      var form = $(range_element).closest(\".range_limit\").find(\"form.range_limit\");\n      var begin_el = form.find(\"input.range_begin\");\n      var end_el = form.find(\"input.range_end\");\n\n      var placeholder_input = $('<input type=\"hidden\" data-slider-placeholder=\"true\" />').appendTo(range_element);\n\n      // make sure slider is loaded\n      if (placeholder_input.slider !== undefined) {\n        placeholder_input.slider({\n          min: min,\n          max: max,\n          value: [min, max],\n          tooltip: \"hide\"\n        });\n\n        // try to make slider width/orientation match chart's\n        var container = range_element.closest(\".range_limit\");\n        var plot_el = container.find(\".chart_js\");\n        var plot = plot_el.data(\"plot\");\n        var slider_el = container.find(\".slider\");\n\n        if (plot_el) {\n          plot_el.attr('aria-hidden', 'true');\n        }\n\n        if (slider_el) {\n          slider_el.attr('aria-hidden', 'true');\n        }\n\n        if (plot && slider_el) {\n          slider_el.width(plot.width());\n          slider_el.css(\"display\", \"block\")\n        } else if (slider_el) {\n          slider_el.css(\"width\", \"100%\");\n        }\n      }\n\n      // Slider change should update text input values.\n      var parent = $(thisContext).parent();\n      var form = $(parent).closest(\".limit_content\").find(\"form.range_limit\");\n      $(parent).closest(\".limit_content\").find(\".profile .range\").on(\"slide\", function(event, ui) {\n        var values = $(event.target).data(\"slider\").getValue();\n        form.find(\"input.range_begin\").val(values[0]);\n        form.find(\"input.range_end\").val(values[1]);\n      });\n    }\n\n    begin_el.val(min);\n    end_el.val(max);\n\n    begin_el.on('input', function() {\n      var val = BlacklightRangeLimit.parseNum(this.value);\n      if (isNaN(val) || val < min) {\n        //for weird data, set slider at min\n        val = min;\n      }\n      var values = placeholder_input.data(\"slider\").getValue();\n      values[0] = val;\n      placeholder_input.slider(\"setValue\", values);\n    });\n\n    end_el.on('input', function() {\n      var val = BlacklightRangeLimit.parseNum(this.value);\n      if (isNaN(val) || val > max) {\n        //weird entry, set slider to max\n        val = max;\n      }\n      var values = placeholder_input.data(\"slider\").getValue();\n      values[1] = val;\n      placeholder_input.slider(\"setValue\", values);\n    });\n\n    begin_el.change(function() {\n      var val1 = BlacklightRangeLimit.parseNum(begin_el.val());\n      var val2 = BlacklightRangeLimit.parseNum(end_el.val());\n\n      if (val2 < val1) {\n        begin_el.val(val2);\n        end_el.val(val1);\n      }\n    });\n\n    end_el.change(function() {\n      var val1 = BlacklightRangeLimit.parseNum(begin_el.val());\n      var val2 = BlacklightRangeLimit.parseNum(end_el.val());\n\n      if (val2 < val1) {\n        begin_el.val(val2);\n        end_el.val(val1);\n      }\n    });\n  }\n\nexport default RangeLimitSlider;","import BlacklightRangeLimit from 'range_limit_shared'\nimport RangeLimitDistroFacet from 'range_limit_distro_facets'\nimport RangeLimitSlider from 'range_limit_slider'\n\nBlacklightRangeLimit.initialize = function() {\n  // Support for Blacklight 7 and 8:\n  const modalSelector = Blacklight.modal?.modalSelector || Blacklight.Modal.modalSelector \n\n  RangeLimitDistroFacet.initialize(modalSelector)\n  RangeLimitSlider.initialize(modalSelector)\n}\n\nexport default BlacklightRangeLimit"],"names":[],"mappings":"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"}